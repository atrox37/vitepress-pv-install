---
outline: deep
---

# 通道点位映射

## 概念定义
由于不同设备厂商的寄存器地址、协议结构不尽相同，需要将“设备实际点位”映射到平台统一的数据模型。
 通道映射用于实现：

- 原始点位 → 统一格式
- 协议地址 → 平台标准地址
- 多寄存器合并、缩放、单位转换等处理
平台通过映射规则，将设备底层寄存器数据转换为平台统一的数据结构，为历史数据、告警、公式计算提供标准输入。

## 字段解释
遵循不同协议的通道，其点位的映射不同：

**modbus_rtu/modbus_tcp**：

- `point_id`：点位唯一编号（正整数）
- `slave_id`：Modbus 等协议中的从机号
- `data_type`：数据类型，有int16、uint16、int32、uint32、float32、int64、uint64、float64、bool。
- `byte_order`：字节序，如AB、BA、ABCD、CDAB等。
- `function_code`：寄存器功能码，分别对应不同的功能寄存器
  - `01`：读取线圈（Coils）状态，用于获取可读写的开关量输出（1bit）。
  - `02`：读取离散输入（Discrete Inputs）状态，用于获取只读的开关量输入（1bit）。
  - `03`：读取保持寄存器（Holding Registers），用于获取可读写的16位寄存器数据（如设定值/参数）。
  - `04`：读取输入寄存器（Input Registers），用于获取只读的16位寄存器数据（如测量值/采集量）。
  - `05`：写单个线圈（Single Coil），用于写入一个开关量输出（1bit）。
  - `06`：写单个保持寄存器（Single Holding Register），用于写入一个16位寄存器值。
  - `15`：写多个线圈（Multiple Coils），用于批量写入多个开关量输出（多个1bit）。
  - `16`：写多个保持寄存器（Multiple Holding Registers），用于批量写入多个16位寄存器值。
- `register_address`：寄存器地址，设备实际存放数据的位置，一般为1-65535。
- `bit_position`：真实值所在的位置，适用于开关量，取值范围为1-15

**di_do**：

* `point_id`：点位唯一编号（正整数）
* `gpio_number`： Linux 给 GPIO line 的“全局编号“，使用户用一个数字就能指到某条 IO 线，不等同于物理针脚/芯片管脚。

**这些内容决定平台如何将设备原始数据正确解析为可使用的业务数据。**
